<div class="calendar-container">
  <div class="date-time">
    <div class="calendar-view">
      <fs-date-picker-header
        [calendarDate]="datePickerModel.calendarDate$ | async"
        [minYear]="datePickerModel.minYear"
        [maxYear]="datePickerModel.maxYear"
        [viewMode]="datePickerModel.calendarMode$ | async"
        (viewModeChange)="viewModeChanged($event)"
        (monthChange)="monthChanged($event)"
        (yearChange)="yearChanged($event)"
        (goNextMonth)="nextMonth()"
        (goPrevMonth)="prevMonth()">
      </fs-date-picker-header>
      @if (dialogRef.components.calendarStart) {
        <fs-date-picker-calendar
          [date]="datePickerModel.model$ | async"
          [calendarDate]="datePickerModel.calendarDate$ | async"
          [dateMode]="datePickerModel.calendarMode$ | async"
          [disabledDates]="datePickerModel.disabledDates$ | async"
          [period]="datePickerModel.period"
          [seedDate]="datePickerModel.seedDate"
          [weekStartsOn]="datePickerModel.weekStartsOn"
          [periodWeeks]="datePickerModel.periodWeeks"
          (change)="dateChanged($event)"
          (periodChange)="periodChanged($event)">
        </fs-date-picker-calendar>
      }
    </div>
    @if (datePickerModel.dateMode !== 'year' && datePickerModel.dateMode !== 'month') {
      @if (datePickerModel.view === 'datetime' || datePickerModel.view === 'time') {
        <fs-date-picker-time
          [date]="datePickerModel.model$ | async"
          [minutes]="datePickerModel.minutes"
          [disabledTimes]="datePickerModel.disabledTimes$ | async"
          [expanded]="timePickerExpanded"
          [showHeading]="datePickerModel.view !== 'time'"
          (onChange)="dateChanged($event)">
        </fs-date-picker-time>
      }
    }
  </div>
  <app-action-buttons>
    @if (!datePickerModel.rangePickerRef) {
      <ng-container [ngTemplateOutlet]="done"></ng-container>
    }
    @if (datePickerModel.rangePickerRef) {
      @if (datePickerModel.isPickerRangeFrom) {
        <a
          mat-button
          color="primary"
          (click)="nextCalendar()">
          Continue
        </a>
      }
      <ng-container [ngTemplateOutlet]="done"></ng-container>
      @if (datePickerModel.isPickerRangeTo) {
        <a
          mat-button
          (click)="prevCalendar()">
          Back
        </a>
      }
    }
    <ng-template #done>
      <a
        class="button-done"
        mat-button
        [color]="doneBtnClass"
        (click)="close()">
        Done
      </a>
    </ng-template>
    @if (datePickerModel.minutes
      && (datePickerModel.view === 'datetime' || datePickerModel.view === 'time')
      && !(datePickerModel.view === 'datetime' && datePickerModel.dateMode === 'date')) {
      <a
        mat-button
        class="button-more"
        (click)="toggleTimeExpand()">
        @if (!timePickerExpanded) {
          More
        } @else {
          Less
        }
      </a>
    }
  </app-action-buttons>
</div>