@if (showHeading && minutes && showNotSelected) {
  <div class="heading-container">
    @if (date) {
      {{ date | date:'h:mm aa'}}
    } @else {
      Time Not Selected
    }
  </div>
}

<div class="time-container">
  <div class="hours-container">
    @if (minutes) {
      <div class="heading">Hour</div>
    }
    <div class="scroll-container">
      @if (expanded) {
        <table>
          @for (hours of timeHoursExpanded; track hours) {
            <tr>
              @for (hour of hours; track hour) {
                <td
                  class="tile number hour">
                  <div
                    class="tile-content"
                    (click)="hourClick(hour)"
                  [ngClass]="{
                    disabled: disabledTimeHours[hour],
                    now: nowHour === hour,
                    selected: hour === selected.hour
                  }">
                    @if (hour < 12) {
                      <span>{{ hour ? hour : 12 }}<span class="am-pm">am</span></span>
                    }
                    @if (hour >= 12) {
                      <span>{{ hour === 12 ? 12 : hour-12 }}<span class="am-pm">pm</span></span>
                    }
                  </div>
                </td>
              }
            </tr>
          }
        </table>
      }
      @if (!expanded) {
        <table>
          @for (group of timeHoursCollapsed; track group; let i = $index) {
            <tbody>
              @for (hours of group; track hours) {
                <tr>
                  @for (hour of hours; track hour) {
                    <td
                      class="tile number hour">
                      <div
                        class="tile-content"
                        (click)="hourClick(hour)"
                    [ngClass]="{
                      disabled: disabledTimeHours[hour],
                      selected: hour === selected.hour,
                      now: nowHour === hour
                    }">
                        @if (hour < 12) {
                          <span>{{ hour ? hour : 12 }}<span class="am-pm">am</span></span>
                        }
                        @if (hour >= 12) {
                          <span>{{ hour === 12 ? 12 : hour-12 }}<span class="am-pm">pm</span></span>
                        }
                      </div>
                    </td>
                  }
                </tr>
              }
            </tbody>
          }
        </table>
      }
    </div>
  </div>
  @if (minutes) {
    <div class="minutes-container">
      <div class="heading">Minute</div>
      <div class="scroll-container">
        @if (expanded) {
          <table>
            @for (minutes of timeMinutesExpanded; track minutes) {
              <tr>
                @for (minute of minutes; track minute) {
                  <td
                    class="tile number minute">
                    <div
                      class="tile-content"
                      [ngClass]="{
                        disabled: disabledTimeMinutes[minute] || (disabledGroupedMinutes[selected.hour] && disabledGroupedMinutes[selected.hour][minute]),
                        selected: minute === selected.minute,
                        now: nowMinute === minute
                      }"
                      (click)="minuteClick(minute)">
                      {{ minute }}
                    </div>
                  </td>
                }
              </tr>
            }
          </table>
        }
        @if (!expanded) {
          <table>
            @for (minutes of timeMinutesCollapsed; track minutes) {
              <tr>
                @for (minute of minutes; track minute) {
                  <td
                    class="tile number minute">
                    <div
                      class="tile-content"
                    [ngClass]="{
                      disabled: disabledTimeMinutes[minute] || (disabledGroupedMinutes[selected.hour] && disabledGroupedMinutes[selected.hour][minute]),
                      selected: minute === selected.minute,
                      now: nowMinute === minute
                    }"
                      (click)="minuteClick(minute)">
                      {{ minute }}
                    </div>
                  </td>
                }
              </tr>
            }
          </table>
        }
      </div>
    </div>
  }
</div>